{% extends "atoz/home.html" %} {% block contents %}
<script>
  function showEditPopup(phone, city, address) {
    document.getElementById("popup").style.display = "block";
    document.getElementById("phone").value = phone;
    document.getElementById("city").value = city;
    document.getElementById("address").value = address;
  }

  function closeEditPopup() {
    document.getElementById("popup").style.display = "none";
  }
</script>
<style>
  label {
    margin-top: 10%;
    font-size: 20px;
    font-family: cursive;
    letter-spacing: 2px;
  }
  input {
    text-align: center;
    font-size: 17px;
    font-variant: common-ligatures;
    color: black;
    margin-top: 5%;
  }
  #popup {
    width: auto;
    font-size: 15px;
    display: none;
    border-radius: 3px;
    margin-top: -2.4%;
    position: absolute;
    margin-left: 17%;
  }
  body {
    height: 100%;
    margin: 0;
    padding: 0;
    background-color: #f5f5f5;
    font-family: Arial, sans-serif;
  }

  .container {
    display: flex;
    min-height: 100vh;
    flex-direction: column;
    justify-content: center;
    background-color: #b3b3b3f0;
  }

  h1 {
    text-align: center;
    color: #333;
  }

  .product {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
  }

  .product:last-child {
    border-bottom: none;
  }

  .product-details {
    flex: 1;
    display: flex;
    flex-direction: column;
    margin-left: 5%;
    gap: 4px;
    align-items: normal;
    font-variant: all-small-caps;
  }

  .product-name {
    font-size: 20px;
    font-weight: bold;
    margin-bottom: 5px;
    font-family: cursive;
    font-variant: all-small-caps;
  }

  .product-category {
    font-size: 18px;
    font-variant: small-caps;
  }

  .product-price {
    color: #3b3b3b;
    margin-bottom: 5px;
    font-size: 17px;
  }

  .product-description {
    margin-bottom: 5px;
    letter-spacing: 0.5px;
    font-family: cursive;
    font-size: 16px;
  }

  .product-quantity {
    color: #131313;
    margin-bottom: 5px;
    font-size: 17px;
  }

  .back-link {
    font-style: italic;
    font-size: 20px;
    display: block;
    text-align: center;
    margin: 20px 0;
    color: #1769ff;
    width: 15%;
    text-decoration: none;
    font-variant: all-petite-caps;
    margin-left: 42%;
  }

  .back-link:hover {
    text-decoration: underline;
  }
</style>

<div class="container">
  <h1
    style="
      font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
      color: ghostwhite;
      position: relative;
      margin-bottom: 7%;
      margin-top: -6%;
    "
  >
    Below are your conclusive details.
  </h1>
  <div
    style="
      display: flex;
      flex-direction: row;
      gap: 180px;
      width: 50%;
      text-align: center;
      left: 23%;
      position: relative;
    "
    class="user-details"
  >
    <div style="display: flex; flex-direction: column; width: 100%; gap: 30px">
      <strong
        style="
          width: 200%;
          background-color: aquamarine;
          height: 25px;
          align-content: space-evenly;
          border-radius: 10px;
          border: 1px solid #6400ff;
          cursor: default;
        "
        >Name:</strong
      ><span
        style="
          width: 200%;
          background-color: whitesmoke;
          border: 1px solid black;
          color: #ff5050;
          height: 25px;
          align-content: space-evenly;
          cursor: default;
        "
        >{{ user.name }}</span
      >
    </div>
    <div style="display: flex; flex-direction: column; width: 100%; gap: 30px">
      <strong
        style="
          width: 200%;
          background-color: aquamarine;
          height: 25px;
          align-content: space-evenly;
          border-radius: 10px;
          border: 1px solid #6400ff;
          cursor: default;
        "
        >Phone Number:</strong
      ><span
        style="
          width: 200%;
          background-color: whitesmoke;
          border: 1px solid black;
          color: #ff5050;
          height: 25px;
          align-content: space-evenly;
          cursor: default;
        "
        >{{ user.phone }}</span
      >
    </div>
    <div style="display: flex; flex-direction: column; width: 100%; gap: 30px">
      <strong
        style="
          width: 200%;
          background-color: aquamarine;
          height: 25px;
          align-content: space-evenly;
          border-radius: 10px;
          border: 1px solid #6400ff;
          cursor: default;
        "
        >City:</strong
      ><span
        style="
          width: 200%;
          background-color: whitesmoke;
          border: 1px solid black;
          color: #ff5050;
          height: 25px;
          align-content: space-evenly;
          cursor: default;
        "
        >{{ user.city }}</span
      >
    </div>
    <div style="display: flex; flex-direction: column; width: 100%; gap: 30px">
      <strong
        style="
          width: 200%;
          background-color: aquamarine;
          height: 25px;
          align-content: space-evenly;
          border-radius: 10px;
          border: 1px solid #6400ff;
          cursor: default;
        "
        >Address:</strong
      ><span
        style="
          width: 200%;
          background-color: whitesmoke;
          border: 1px solid black;
          color: #ff5050;
          height: 25px;
          align-content: space-evenly;
          cursor: default;
        "
        >{{ user.address }}</span
      >
    </div>
    <button
      id="dashboard_button"
      type="button"
      onclick="showEditPopup('{{ user.phone }}', '{{ user.city }}', '{{ user.address }}')"
      class="text-white"
      style="
        background-color: #ef9f09;
        width: 120%;
        margin-left: -40px;
        font-size: 20px;
        height: 0%;
        border-radius: 3px;
        margin-top: 3.5%;
        font-style: italic;
        font-variant: all-petite-caps;
        font-family: fangsong;
        border: 1px solid #6b0000;
        cursor: pointer;
      "
    >
      Edit
    </button>
    <span id="popup" class="popup">
      <form
        style="
          display: flex;
          flex-direction: column;
          width: 110%;
          align-items: center;
          margin-left: 50%;
          border: 2px solid #000000;

          background-color: #f5dede;
          border-radius: 10px;
          padding: 20px;
        "
        method="POST"
        action="/update_details"
      >
        <label style="margin-top: 10%" for="phone">Phone Number</label>
        <input type="phone" id="phone" name="phone" placeholder=".........." />
        <label style="margin-top: 10%" for="city">City</label>
        <input type="text" id="city" name="city" placeholder="...xyz..." />
        <label style="margin-top: 10%" for="address">Address</label>
        <input
          type="text"
          id="address"
          name="address"
          placeholder="...address..."
        />
        <button
          style="
            width: 100%;
            font-size: 17px;
            margin-top: 10%;
            margin-bottom: 10%;
            background-color: rgba(127, 255, 232, 0.895);
            border: 2px solid #ff8c00c8;
            font-variant: all-petite-caps;
            font-family: cursive;
            letter-spacing: 3px;
            cursor: pointer;
          "
          type="submit"
        >
          update changes!
        </button>
      </form>
      <span
        onclick="closeEditPopup()"
        style="position: absolute; margin-top: -165%; margin-left: 119%"
        ><img
          src="/static/css/cross.png"
          style="height: 35px; width: 35px; cursor: pointer"
      /></span>
    </span>
  </div>
  <button
    id="dashboard_btn"
    onclick="window.location.href='/checkout/pay'"
    style="
      top: 10%;
      margin-left: 90%;
      width: 10%;
      font-size: 22px;
      margin-top: 3%;
      text-align: center;
      cursor: pointer;
      color: rgb(220 255 0);
      border-radius: 3px;
      background-color: #63636396;
      border-color: transparent;
      font-variant: petite-caps;
      position: absolute;
      letter-spacing: 2px;
      font-family: cursive;
      height: 35px;
    "
  >
    Pay
  </button>
  {% for product in products %}
  <div class="product">
    <div class="product-details">
      <div class="product-name">{{ product.name }}</div>
      <div class="product-category">{{ product.category }}</div>
      <div class="product-price">
        ₹ {{ product.calculated_price }} (per: ₹ {{product.price }} )
      </div>
      <div style="display: flex; flex-direction: row; gap: 25px">
        <div class="product-quantity">
          Quantity added: {{ request.cookies.get('product_' ~ product.id ~
          '_quantity') }}
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
  <a href="{{ url_for('user') }}" class="back-link">Back to Products</a>
  <span>
    {% for message in get_flashed_messages() %}
    <p
      style="
        font-size: 20px;
        color: red;
        font-variant: unicase;
        width: 100%;
        text-align: center;
        position: absolute;
      "
    >
      {{ message }}
    </p>
    {% endfor %}
  </span>
</div>
{% endblock %}
